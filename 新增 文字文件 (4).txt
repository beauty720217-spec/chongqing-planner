<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>é‡æ…¶ 5 å¤© 4 å¤œç²¾è¯éŠ</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; overscroll-behavior-y: none; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .animate-fadeIn { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* é‡å° LINE ç€è¦½å™¨çš„å„ªåŒ– */
        html, body { height: 100%; overflow-x: hidden; }
        #root { min-height: 100vh; display: flex; flex-direction: column; }
    </style>
</head>
<body class="bg-gray-100 flex justify-center items-start min-h-screen">

    <div id="root" class="w-full max-w-md bg-white min-h-screen shadow-2xl relative mx-auto"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ç°¡æ˜“åœ–æ¨™çµ„ä»¶ (SVG) ---
        const IconBase = ({ children, className, size = 20, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const MapPin = (props) => <IconBase {...props}><path d="M20 10c0 6-9 13-9 13s-9-7-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></IconBase>;
        const CalendarIcon = (props) => <IconBase {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></IconBase>;
        const XIcon = (props) => <IconBase {...props}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></IconBase>;
        const MapIcon = (props) => <IconBase {...props}><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></IconBase>;
        const Navigation = (props) => <IconBase {...props}><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><polyline points="9 18 15 12 9 6"></polyline></IconBase>;
        const Camera = (props) => <IconBase {...props}><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></IconBase>;
        const Cloud = (props) => <IconBase {...props}><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path></IconBase>;
        const CloudRain = (props) => <IconBase {...props}><line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path></IconBase>;
        const Sun = (props) => <IconBase {...props}><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></IconBase>;
        const Umbrella = (props) => <IconBase {...props}><path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path></IconBase>;
        const Shirt = (props) => <IconBase {...props}><path d="M20.38 3.46L16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"></path></IconBase>;
        const ShareIcon = (props) => <IconBase {...props}><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></IconBase>;

        const ChongqingTripApp = () => {
            const [activeTab, setActiveTab] = useState('day1');
            const [view, setView] = useState('itinerary'); 
            const [expandedMapIndex, setExpandedMapIndex] = useState(null);

            const tripInfo = {
                title: "é‡æ…¶ 5 å¤© 4 å¤œç²¾è¯éŠ",
                date: "2025/03/03 (äºŒ) ï½ 03/07 (å…­)",
                location: "æ±ŸåŒ—å€ / è§€éŸ³æ©‹é™„è¿‘",
                tips: "é‡æ…¶åœ°å½¢ç‰¹æ®Šï¼Œæ­¥è¡Œéœ€ç©¿èˆ’é©é‹å±¥ï¼›D3å»ºè­°åŒ…è»Šã€‚",
                // Cute illustration cover image - Chongqing Style Cartoon
                coverImage: "https://img.freepik.com/free-vector/flat-design-travel-concept-with-landmarks_23-2147754655.jpg" 
            };

            const weatherData = {
                day1: { temp: "11-16Â°C", condition: "å¤šé›²æ™‚é™°", icon: Cloud, tip: "å¾®æ¶¼ï¼Œèˆ’é©è–„å¤–å¥—" },
                day2: { temp: "12-17Â°C", condition: "é™°è½‰å°é›¨", icon: CloudRain, tip: "æ”œå¸¶é›¨å…·ï¼Œé˜²æ»‘é‹" },
                day3: { temp: "10-15Â°C", condition: "å°é›¨", icon: Umbrella, tip: "å±±å€è¼ƒæ¶¼ï¼Œéœ€ä¿æš–å¤–å¥—" },
                day4: { temp: "11-18Â°C", condition: "å¤šé›²", icon: Sun, tip: "æ—©æ™šæº«å·®å¤§ï¼Œæ´‹è”¥å¼ç©¿æ­" },
                day5: { temp: "13-19Â°C", condition: "æ™´æ™‚å¤šé›²", icon: Sun, tip: "èˆ’é©ï¼Œé©åˆé€›è¡—" }
            };

            const itineraryData = {
                day1: {
                    date: "3/03 (äºŒ)",
                    title: "åˆæŠµå±±åŸ",
                    subtitle: "æŠµé”é‡æ…¶ & å•†åœˆåˆé«”é©—",
                    highlight: "è§€éŸ³æ©‹å¥½åƒè¡—ã€ä¹è¡—å¤œç”Ÿæ´»",
                    events: [
                        { 
                            time: "18:00", 
                            title: "æŠµé”é‡æ…¶æ±ŸåŒ—æ©Ÿå ´", 
                            desc: "å…¥å¢ƒT3èˆªç«™/7è™Ÿå‡ºå£ã€‚å°‹æ‰¾ã€Œé»ƒè‰²æ³•æ‹‰åˆ©ã€è¨ˆç¨‹è»Šæ‹ç…§é»ï¼Œå‰å¾€é…’åº—è¾¦ç†å…¥ä½ã€‚", 
                            emoji: "âœˆï¸", 
                            location: "é‡æ…¶æ±ŸåŒ—åœ‹éš›æ©Ÿå ´T3èˆªç«™æ¨“",
                        },
                        { 
                            time: "æ™šé¤", 
                            title: "è§€éŸ³æ©‹å•†åœˆ", 
                            desc: "é‡æ…¶æœ€ç†±é¬§å•†åœˆæ•£æ­¥ã€‚å¿…å»ã€Œå¥½åƒè¡—ã€å“åšåœ¨åœ°å°åƒï¼ˆçƒ¤ä¸²ã€é…¸è¾£ç²‰ã€è±Œé›œéºµï¼‰ã€‚", 
                            type: "food", 
                            emoji: "ğŸŒ¶ï¸", 
                            location: "é‡æ…¶è§€éŸ³æ©‹æ­¥è¡Œè¡—",
                        },
                        { 
                            time: "æ™šä¸Š", 
                            title: "ä¹è¡— (ä¸å¤œä¹è¡—)", 
                            desc: "è‹¥æœ‰é«”åŠ›å¯å‰å¾€ï¼Œé€™æ˜¯å¹´è¼•äººçš„é…’å§è¡—ï¼Œé©åˆæ‹å¤œæ™¯ã€åƒå®µå¤œã€‚", 
                            type: "activity", 
                            emoji: "ğŸ»", 
                            location: "é‡æ…¶ä¹è¡—",
                        },
                        { 
                            time: "å…¨å¤©", 
                            title: "è¡Œç¨‹å»ºè­°", 
                            desc: "ç¬¬ä¸€å¤©è¡Œç¨‹è¼•é¬†ç‚ºä¸»ï¼Œå»ºè­°æ—©é»ä¼‘æ¯å„²å‚™é«”åŠ›ã€‚", 
                            type: "note", 
                            emoji: "ğŸ’¡", 
                            location: "é‡æ…¶è§€éŸ³æ©‹" 
                        }
                    ]
                },
                day2: {
                    date: "3/04 (ä¸‰)",
                    title: "é­”å¹»å¸‚å€",
                    subtitle: "å±±åŸæ­¥é“ & æ´ªå´–æ´å¤œæ™¯",
                    highlight: "18æ¢¯ã€è§£æ”¾ç¢‘ã€é­”å¹»å¤œæ™¯å‹•ç·š",
                    events: [
                        { 
                            time: "æ—©é¤", 
                            title: "é‡æ°´æºæ—©å¸‚", 
                            desc: "é«”é©—åœ¨åœ°ç…™ç«æ°£ï¼šç‡’ç™½ã€æ²¹æ¢ã€é­¯éµã€è‚¥è…¸ç‰›è‚‰éºµã€‚", 
                            type: "food", 
                            emoji: "ğŸœ", 
                            location: "é‡æ…¶é‡æ°´æº",
                        },
                        { 
                            time: "ä¸Šåˆ", 
                            title: "å±±åŸæ­¥é“ & 18æ¢¯", 
                            desc: "å¾ã€Œä½³å¯¦é¤Šè€é™¢å…¥å£ã€é€²å…¥å±±åŸæ­¥é“ï¼ˆç´…ç‰†ã€è€æˆ¿å­ï¼‰ã€‚æ¥è‘—æ­¥è¡Œè‡³18æ¢¯å‚³çµ±é¢¨è²Œå€ï¼ˆç´„30-40åˆ†ï¼‰ã€‚", 
                            type: "activity", 
                            emoji: "ğŸ®", 
                            location: "é‡æ…¶å±±åŸå··",
                        },
                        { 
                            time: "åˆé¤", 
                            title: "å±±åŸå®¶å¸¸èœ", 
                            desc: "åœ°å€ï¼šæ¸ä¸­å€äº”ä¸€è·¯250è™Ÿã€‚æ¨è–¦ï¼šè™çš®è‚˜å­ã€è±¬è¹„æ¹¯ã€‚", 
                            type: "food", 
                            emoji: "ğŸš", 
                            location: "é‡æ…¶æ¸ä¸­å€äº”ä¸€è·¯250è™Ÿ" 
                        },
                        { 
                            time: "ä¸‹åˆ", 
                            title: "è§£æ”¾ç¢‘ & é­æ˜Ÿæ¨“", 
                            desc: "è§£æ”¾ç¢‘å•†åœˆè³¼ç‰©ã€‚éš¨å¾Œå‰å¾€é­æ˜Ÿæ¨“ï¼ˆå±±åŸç¬¬ä¸‰æ­¥é“æ—ï¼‰ï¼Œé«”é©—ã€Œç¶²ç´…è¦–è§’ã€ä¿¯ç°åŸå¸‚ã€‚", 
                            type: "activity", 
                            emoji: "ğŸ™ï¸", 
                            location: "é‡æ…¶è§£æ”¾ç¢‘æ­¥è¡Œè¡—",
                        },
                        { 
                            time: "å‚æ™š", 
                            title: "é­”å¹»å¤œæ™¯å‹•ç·š", 
                            desc: "1. æ´ªå´–æ´ï¼ˆé»ƒæ˜æ‹åŠè…³æ¨“ï¼‰â†’ 2. åƒå»é–€å¤§æ©‹ï¼ˆæ‹å´é¢ï¼‰â†’ 3. æ±ŸåŒ—å˜´æ±Ÿç˜å…¬åœ’ â†’ 4. å¤§åŠ‡é™¢å¹³å°ï¼ˆæ‹å°å²¸å…¨æ™¯ï¼‰ã€‚", 
                            type: "camera", 
                            emoji: "ğŸ“¸", 
                            isHighlight: true, 
                            location: "é‡æ…¶æ´ªå´–æ´æ°‘ä¿—é¢¨è²Œå€",
                        },
                        { 
                            time: "æ™šé¤", 
                            title: "å­å£è€çƒ§çƒ¤", 
                            desc: "å¯†å­å›æ¨è–¦çš„äººæ°£ç‡’çƒ¤ã€‚", 
                            type: "food", 
                            emoji: "ğŸ¢", 
                            location: "é‡æ…¶å—å±±å­å£" 
                        }
                    ]
                },
                day3: {
                    date: "3/05 (å››)",
                    title: "æ­¦éš†ä»™å¢ƒ",
                    subtitle: "å¤©ç”Ÿä¸‰æ©‹ & è‹—æ—é¢¨æƒ…",
                    highlight: "è®Šå½¢é‡‘å‰›å–æ™¯åœ°ã€ä¹é»åŸ",
                    events: [
                        { 
                            time: "æ—©æ™¨", 
                            title: "åŒ…è»Šå‡ºç™¼", 
                            desc: "ä»Šæ—¥è¡Œç¨‹è¼ƒé ï¼Œå¼·çƒˆå»ºè­°åŒ…è»Šã€‚æº–æ™‚å¾å¸‚å€å‡ºç™¼ã€‚", 
                            type: "transport", 
                            emoji: "ğŸš", 
                            location: "é‡æ…¶è§€éŸ³æ©‹" 
                        },
                        { 
                            time: "ä¸Šåˆ", 
                            title: "æ­¦éš†å¤©ç”Ÿä¸‰æ©‹", 
                            desc: "åœç•™ç´„3å°æ™‚ã€‚ä¸–ç•Œè‡ªç„¶éºç”¢ï¼Œé›»å½±ã€Šæ»¿åŸç›¡å¸¶é»ƒé‡‘ç”²ã€‹åŠã€Šè®Šå½¢é‡‘å‰›ã€‹å–æ™¯åœ°ã€‚", 
                            type: "activity", 
                            emoji: "ğŸ”ï¸", 
                            isHighlight: true, 
                            location: "é‡æ…¶æ­¦éš†å¤©ç”Ÿä¸‰æ©‹",
                        },
                        { 
                            time: "é€”ç¶“", 
                            title: "çƒæ±Ÿç•«å»Š", 
                            desc: "æ²¿é€”æ¬£è³æ™¯è‰²ï¼Œåœè»Šæ‹ç…§å³å¯ï¼ˆç´„ 20â€“30 åˆ†é˜ï¼‰ã€‚", 
                            type: "activity", 
                            emoji: "ğŸ–¼ï¸", 
                            location: "é‡æ…¶çƒæ±Ÿç•«å»Š",
                        },
                        { 
                            time: "ä¸‹åˆ", 
                            title: "èš©å°¤ä¹é»åŸ", 
                            desc: "åœç•™ç´„ 1â€“2 å°æ™‚ã€‚è‹—æ—æ–‡åŒ–ä¸»é¡Œï¼Œæœ‰ç¶²ç¾ç»ç’ƒæ©‹èˆ‡è¡¨æ¼”ã€‚", 
                            type: "activity", 
                            emoji: "ğŸ‘¹", 
                            location: "é‡æ…¶èš©å°¤ä¹é»åŸ",
                        },
                        { 
                            time: "å‚æ™š", 
                            title: "è¿”å›å¸‚å€", 
                            desc: "è»Šç¨‹ç´„ 2 å°æ™‚ã€‚", 
                            type: "transport", 
                            emoji: "â°", 
                            location: "é‡æ…¶å¸‚å€" 
                        },
                        { 
                            time: "æ™šé¤", 
                            title: "ç§‹é¦™çƒ¤é­šå¤§æ’æª”", 
                            desc: "èæ™¯åŸè‡»è‹‘åº—ã€‚å¿…åƒé‡æ…¶ç‰¹è‰²çƒ¤é­šã€‚", 
                            type: "food", 
                            emoji: "ğŸŸ", 
                            location: "é‡æ…¶èæ™¯åŸè‡»è‹‘" 
                        }
                    ]
                },
                day4: {
                    date: "3/06 (äº”)",
                    title: "å—å²¸èˆŠå¤¢",
                    subtitle: "å—å±±è€è¡— & ä¸‰æ¯›æ•…å±…",
                    highlight: "è€å›æ´ã€ä¸‹æµ©é‡Œã€å—æ¿±è·¯å¤œæ™¯",
                    events: [
                        { 
                            time: "07:30", 
                            title: "æ±ªå®¶å ¡æ—©å¸‚", 
                            desc: "æœ€æ¥åœ°æ°£çš„æœ¬åœ°èœå¸‚å ´ã€‚ç«é‹æ–™ã€åœŸé›ã€è‡˜è‚‰ã€æ°´æœã€‚", 
                            type: "activity", 
                            emoji: "ğŸ¥¬", 
                            location: "é‡æ…¶æ±ªå®¶å ¡" 
                        },
                        { 
                            time: "11:30", 
                            title: "å‡ºç™¼å‰å¾€å—å±±", 
                            desc: "åœ°éµè½‰å…¬è»Šæˆ–æ‰“è»Šã€‚", 
                            type: "transport", 
                            emoji: "ğŸš¡", 
                            location: "é‡æ…¶å—å±±" 
                        },
                        { 
                            time: "13:00", 
                            title: "é»ƒæ¡·åŸ¡è€è¡—", 
                            desc: "é‡æ…¶æœ€ç¾è€è¡—æ¼«æ­¥ã€‚", 
                            type: "activity", 
                            emoji: "ğŸšï¸", 
                            location: "é‡æ…¶é»ƒæ¡·åŸ¡è€è¡—",
                        },
                        { 
                            time: "14:00", 
                            title: "ä¸‰æ¯›æ•…å±…", 
                            desc: "æ–‡é’å¿…è¨ªæ‹ç…§é»ã€‚", 
                            type: "activity", 
                            emoji: "ğŸ“š", 
                            location: "é‡æ…¶ä¸‰æ¯›æ•…å±…",
                        },
                        { 
                            time: "15:00", 
                            title: "è€å›æ´", 
                            desc: "å»ºè­°å¾ã€Œè¥¿é–€ä¸‹æ–¹ã€é€²å…¥ã€‚å±±æ´ã€å¤å‰èˆ‡æ´ç©´çµåˆçš„ç¨ç‰¹æ™¯è§€ã€‚", 
                            type: "activity", 
                            emoji: "ğŸ•", 
                            location: "é‡æ…¶è€å›æ´é“è§€",
                        },
                        { 
                            time: "ä¸‹åˆèŒ¶", 
                            title: "çƒ¤èŒ¶", 
                            desc: "åœ¨å—å±±äº«å—æ‚ é–’åˆå¾Œã€‚", 
                            type: "food", 
                            emoji: "ğŸµ", 
                            location: "é‡æ…¶å—å±±ä¸€æ£µæ¨¹" 
                        },
                        { 
                            time: "å‚æ™š", 
                            title: "ä¸‹æµ©é‡Œ & é¾é–€æµ©", 
                            desc: "é è¿‘å—å±±å±±è…°çš„è€è¡—èˆ‡æ±Ÿæ™¯ã€‚æ™šä¸Šé¾é–€æµ©æ°£æ°›æ¥µä½³ã€‚", 
                            type: "activity", 
                            emoji: "ğŸŒ†", 
                            location: "é‡æ…¶é¾é–€æµ©è€è¡—",
                        },
                        { 
                            time: "æ™šé¤", 
                            title: "å—æ¿±è·¯", 
                            desc: "æ²¿è‘—å—æ¿±è·¯é¸æ“‡é¤å»³ï¼Œé‚Šåƒé‚Šçœ‹çµ•ç¾æ±Ÿæ™¯ã€‚", 
                            type: "food", 
                            emoji: "ğŸ½ï¸", 
                            location: "é‡æ…¶å—æ¿±è·¯",
                        }
                    ]
                },
                day5: {
                    date: "3/07 (å…­)",
                    title: "å‘Šåˆ¥é‡æ…¶",
                    subtitle: "å…‰ç’°è³¼ç‰© & æœ€å¾Œæ¡è²·",
                    highlight: "æ²å…‰æ£®æ—ã€è€ç«é‹",
                    events: [
                        { 
                            time: "ä¸Šåˆ", 
                            title: "å…‰ç’°è³¼ç‰©å…¬åœ’", 
                            desc: "è¯æ½¤è¬è±¡åŸã€‚åƒè§€è¶…ç¾ç¶ æ¤ä¸­åº­ã€Œæ²å…‰æ£®æ—ã€ï¼Œé©åˆæœ€å¾Œæ¡è²·èˆ‡æ‹ç…§ã€‚", 
                            type: "activity", 
                            emoji: "ğŸŒ³", 
                            location: "é‡æ…¶å…‰ç’°è³¼ç‰©å…¬åœ’",
                        },
                        { 
                            time: "åˆé¤", 
                            title: "å‘¨åª½è€ç«é‹", 
                            desc: "é‡æ…¶é«˜äººæ°£ã€æ¹¯åº•å¤ å‘³çš„è€ç«é‹ï¼Œå‘Šåˆ¥é‡æ…¶çš„æœ€å¾Œä¸€é¤ã€‚", 
                            type: "food", 
                            emoji: "ğŸ²", 
                            location: "é‡æ…¶å‘¨åª½è€ç«é‹" 
                        },
                        { 
                            time: "ç”œé»", 
                            title: "Crapes Cake", 
                            desc: "é£¯å¾Œç”œé»ã€‚", 
                            type: "food", 
                            emoji: "ğŸ°", 
                            location: "é‡æ…¶Crapes Cake" 
                        },
                        { 
                            time: "14:30", 
                            title: "å‰å¾€æ©Ÿå ´", 
                            desc: "å»ºè­° 14:30â€“15:00 å‡ºç™¼ã€‚å¾æ±ŸåŒ—/è§€éŸ³æ©‹æ­åœ°éµå»æ©Ÿå ´å¾ˆæ–¹ä¾¿ã€‚", 
                            type: "transport", 
                            emoji: "ğŸš‡", 
                            location: "é‡æ…¶æ±ŸåŒ—åœ‹éš›æ©Ÿå ´" 
                        },
                        { 
                            time: "17:15", 
                            title: "ç­æ©Ÿèµ·é£›", 
                            desc: "å¸¶è‘—æ»¿æ»¿çš„å›æ†¶é›¢é–‹é‡æ…¶ã€‚", 
                            type: "transport", 
                            emoji: "ğŸ›«", 
                            location: "é‡æ…¶æ±ŸåŒ—åœ‹éš›æ©Ÿå ´T3" 
                        }
                    ]
                }
            };

            const toggleMap = (index) => {
                setExpandedMapIndex(expandedMapIndex === index ? null : index);
            };

            const shareApp = () => {
                if (navigator.share) {
                    navigator.share({
                        title: 'é‡æ…¶ 5 å¤© 4 å¤œç²¾è¯éŠ',
                        text: 'æˆ‘çš„é‡æ…¶ä¹‹æ—…è©³ç´°è¡Œç¨‹ï¼',
                        url: window.location.href,
                    })
                    .then(() => console.log('åˆ†äº«æˆåŠŸ'))
                    .catch((error) => console.log('åˆ†äº«å¤±æ•—', error));
                } else {
                    alert("è«‹ä½¿ç”¨ç€è¦½å™¨çš„åˆ†äº«åŠŸèƒ½å‚³é€é€£çµ");
                }
            };

            const DayButton = ({ dayKey, label, date }) => (
                <button
                    onClick={() => { setActiveTab(dayKey); setView('itinerary'); setExpandedMapIndex(null); }}
                    className={`flex-shrink-0 px-4 py-3 mr-2 rounded-xl flex flex-col items-center justify-center transition-all duration-300 min-w-[80px] ${
                        activeTab === dayKey && view === 'itinerary'
                            ? 'bg-gradient-to-br from-red-600 to-orange-600 text-white shadow-lg scale-105' 
                            : 'bg-white text-gray-500 border border-gray-100'
                    }`}
                >
                    <span className="text-xs font-medium opacity-80">{date.split(' ')[0]}</span>
                    <span className="text-sm font-bold">{label}</span>
                </button>
            );

            const WeatherCard = ({ dayData }) => {
                const Icon = dayData.icon;
                return (
                    <div className="mx-5 mb-6 bg-blue-50 rounded-xl p-4 border border-blue-100 flex items-center justify-between shadow-sm">
                        <div className="flex items-center">
                            <div className="bg-white p-2 rounded-full shadow-sm mr-3">
                                <Icon size={24} className="text-blue-500" />
                            </div>
                            <div>
                                <div className="text-xs text-gray-500 font-medium">æ¯æ—¥å¤©æ°£é å ±</div>
                                <div className="text-sm font-bold text-gray-800">{dayData.condition} â€¢ {dayData.temp}</div>
                            </div>
                        </div>
                        <div className="text-right">
                            <div className="flex items-center justify-end text-xs text-blue-600 font-medium mb-0.5">
                                <Shirt size={12} className="mr-1" /> ç©¿æ­å»ºè­°
                            </div>
                            <div className="text-xs text-gray-600">{dayData.tip}</div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="bg-gray-50 min-h-screen pb-20 relative">
                    {/* Cover Area - Replaced Image with Gradient */}
                    <div className="relative h-56 overflow-hidden bg-gradient-to-br from-red-600 to-orange-500">
                        <div className="absolute inset-0 bg-black/10"></div>
                        
                        <div className="absolute bottom-4 left-4 z-20 text-white pb-6">
                            <div className="flex items-center space-x-2 text-xs font-medium bg-white/20 backdrop-blur-md px-2 py-0.5 rounded-full w-fit mb-1 shadow-sm border border-white/30">
                                <span>5å¤©4å¤œ</span>
                            </div>
                            <h1 className="text-3xl font-bold tracking-tight drop-shadow-md">é‡æ…¶ 5 å¤© 4 å¤œç²¾è¯éŠ</h1>
                            <div className="flex items-center text-sm opacity-95 mt-1 drop-shadow-sm">
                                <CalendarIcon size={14} className="mr-1" />
                                {tripInfo.date}
                            </div>
                        </div>
                        
                        <button onClick={shareApp} className="absolute top-4 left-4 z-20 bg-white/20 backdrop-blur-md p-2 rounded-full text-white hover:bg-white/30 transition-colors shadow-sm">
                            <ShareIcon size={20} />
                        </button>

                        <button onClick={() => setView(view === 'info' ? 'itinerary' : 'info')} className="absolute top-4 right-4 z-20 bg-white/20 backdrop-blur-md p-2 rounded-full text-white hover:bg-white/30 transition-colors shadow-sm">
                            <Info size={20} />
                        </button>
                    </div>

                    {/* Main Content Area */}
                    <div className="relative -mt-6 bg-gray-50 rounded-t-3xl z-30 min-h-[500px] shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
                        
                        {view === 'itinerary' ? (
                            <>
                                <div className="sticky top-0 bg-gray-50 z-40 pt-4 pb-2 px-4 shadow-sm rounded-t-3xl">
                                    <div className="flex overflow-x-auto hide-scrollbar pb-2">
                                        {Object.keys(itineraryData).map((key, index) => (
                                            <DayButton key={key} dayKey={key} label={`Day ${index + 1}`} date={itineraryData[key].date} />
                                        ))}
                                    </div>
                                </div>

                                <div className="px-5 py-4">
                                    <h2 className="text-2xl font-bold text-gray-800">{itineraryData[activeTab].title}</h2>
                                    <p className="text-gray-500 text-sm mt-1">{itineraryData[activeTab].subtitle}</p>
                                    <div className="mt-3 inline-flex items-center px-3 py-1 bg-orange-100 text-orange-700 rounded-lg text-xs font-medium">
                                        <AlertCircle size={12} className="mr-1.5" />
                                        é‡é»ï¼š{itineraryData[activeTab].highlight}
                                    </div>
                                </div>

                                <WeatherCard dayData={weatherData[activeTab]} />

                                <div className="px-5 pb-8">
                                    <div className="relative border-l-2 border-gray-200 ml-3 space-y-8">
                                        {itineraryData[activeTab].events.map((event, idx) => (
                                            <div key={idx} className="relative pl-8 group">
                                                <div className={`absolute -left-[9px] top-1 w-5 h-5 rounded-full border-4 border-white shadow-sm flex items-center justify-center ${event.isHighlight ? 'bg-red-500' : 'bg-gray-300'}`}></div>
                                                
                                                <div className="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow relative overflow-hidden">
                                                    <div className="flex justify-between items-start mb-2">
                                                        <span className={`text-xs font-bold px-2 py-0.5 rounded ${event.time.includes(':') ? 'bg-gray-100 text-gray-600' : 'bg-red-50 text-red-600'}`}>{event.time}</span>
                                                        <div className="flex space-x-2">
                                                            <button onClick={() => toggleMap(idx)} className={`p-1.5 rounded-full transition-colors ${expandedMapIndex === idx ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-400 hover:bg-gray-200'}`}>
                                                                {expandedMapIndex === idx ? <XIcon size={14} /> : <MapIcon size={14} />}
                                                            </button>
                                                            <span className="text-xl filter grayscale-[0.2] hover:grayscale-0 transition-all cursor-default">{event.emoji}</span>
                                                        </div>
                                                    </div>
                                                    
                                                    <h3 className="text-lg font-bold text-gray-800 mb-1">{event.title}</h3>
                                                    <p className="text-gray-600 text-sm leading-relaxed">{event.desc}</p>
                                                    
                                                    {event.type === 'food' && <div className="mt-3 flex items-center text-xs text-orange-600 font-medium"><span className="mr-1 text-base">ğŸ¤¤</span> æ¨è–¦ç¾é£Ÿ</div>}

                                                    {expandedMapIndex === idx && (
                                                        <div className="mt-4 pt-4 border-t border-gray-100 animate-fadeIn">
                                                            <div className="rounded-lg overflow-hidden border border-gray-200 h-48 bg-gray-100 relative">
                                                                <iframe width="100%" height="100%" frameBorder="0" scrolling="no" marginHeight="0" marginWidth="0" src={`https://maps.google.com/maps?q=${encodeURIComponent(event.location)}&t=&z=13&ie=UTF8&iwloc=&output=embed`} title={`Map for ${event.title}`}></iframe>
                                                            </div>
                                                            <div className="mt-3 flex justify-between items-center">
                                                                <div className="flex items-center text-xs text-gray-500"><MapPin size={12} className="mr-1" />{event.location}</div>
                                                                <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(event.location)}`} target="_blank" className="flex items-center text-xs bg-blue-600 text-white px-3 py-1.5 rounded-full hover:bg-blue-700 transition-colors"><Navigation size={12} className="mr-1" />å°èˆª</a>
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </>
                        ) : (
                            <div className="p-6 animate-fadeIn">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6">è¡Œç¨‹è³‡è¨Š & ç­†è¨˜</h2>
                                <div className="space-y-4">
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                                        <div className="flex items-center space-x-3 mb-3">
                                            <div className="bg-blue-100 p-2 rounded-lg text-blue-600"><MapPin size={20} /></div>
                                            <h3 className="font-bold text-gray-800">ä½å®¿å»ºè­°</h3>
                                        </div>
                                        <p className="text-gray-600 text-sm leading-relaxed">{tripInfo.location}<br/><span className="text-xs text-gray-400">äº¤é€šæœ€æ–¹ä¾¿ï¼Œç¾é£Ÿèšé›†åœ°ã€‚</span></p>
                                        <div className="mt-3">
                                            <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent("é‡æ…¶è§€éŸ³æ©‹")}`} target="_blank" className="text-xs text-blue-600 flex items-center font-medium">æŸ¥çœ‹å€åŸŸåœ°åœ– <ChevronRight size={12} /></a>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                                        <div className="flex items-center space-x-3 mb-3">
                                            <div className="bg-orange-100 p-2 rounded-lg text-orange-600"><AlertCircle size={20} /></div>
                                            <h3 className="font-bold text-gray-800">é‡é»æé†’</h3>
                                        </div>
                                        <ul className="text-gray-600 text-sm space-y-2 list-disc list-inside">
                                            <li>é‡æ…¶è¢«ç¨±ç‚ºã€Œå±±åŸã€ï¼Œåœ°å½¢èµ·ä¼å¤§ï¼Œè«‹å‹™å¿…ç©¿è‘—<strong>èˆ’é©å¥½èµ°çš„é‹å­</strong>ã€‚</li>
                                            <li>Day 3 å‰å¾€æ­¦éš†è·é›¢è¼ƒé ï¼Œå»ºè­°<strong>åŒ…è»Š</strong>æœ€ç‚ºè¼•é¬†ã€‚</li>
                                            <li>é‡æ…¶å£å‘³åè¾£ï¼Œè…¸èƒƒè—¥å‚™ç”¨ã€‚</li>
                                            <li>å°èˆªåœ¨é‡æ…¶ç«‹é«”äº¤é€šä¸­æœ‰æ™‚æœƒå¤±éˆï¼Œå•è·¯äººæœ€å¿«ã€‚</li>
                                        </ul>
                                    </div>

                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                                        <div className="flex items-center space-x-3 mb-3">
                                            <div className="bg-purple-100 p-2 rounded-lg text-purple-600"><Camera size={20} /></div>
                                            <h3 className="font-bold text-gray-800">å¿…æ‹æ‰“å¡é»</h3>
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {['æ´ªå´–æ´å¤œæ™¯', 'é»ƒè‰²æ³•æ‹‰åˆ©', 'æå­å£©ç©¿æ¨“', 'é­æ˜Ÿæ¨“å¤©æ©‹', 'é•·æ±Ÿç´¢é“'].map(tag => (
                                                <span key={tag} className="px-3 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">#{tag}</span>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                                <button onClick={() => setView('itinerary')} className="mt-8 w-full py-3 bg-gray-800 text-white rounded-xl font-medium hover:bg-gray-900 transition-colors">è¿”å›è¡Œç¨‹è¡¨</button>
                            </div>
                        )}
                    </div>
                    
                    {/* Floating Map Button */}
                    <div className="fixed bottom-6 right-6 z-50">
                        <button onClick={() => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent("é‡æ…¶å¸‚")}`, '_blank')} className="bg-red-600 text-white p-4 rounded-full shadow-lg shadow-red-600/30 hover:scale-110 transition-transform flex items-center justify-center">
                            <MapPin size={24} />
                        </button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ChongqingTripApp />);
    </script>
</body>
</html>